openapi: 3.0.3
info:
  title: 소상톡톡 API
  version: 0.0.1
servers:
  - url: https://sotalk.example.com/api/v1
tags:
  - name: 회원가입
  - name: 로그인
  - name: 게시판
  - name: 메시지
  - name: 마이페이지
  - name: 기타
  - name: 콤보
# TODO 보안 적용
#security:
#  - bearerAuth: [ ]
paths:
  /register/mail:
    post:
      tags:
        - 회원가입
      summary: 이메일 인증 메일 전송
      security: [ ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  example: "test@example.com"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  expiredAt:
                    type: number
                    example: 1732253873491

  /register/mail/check:
    post:
      tags:
        - 회원가입
      summary: 인증번호 확인
      security: [ ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - certNo
              properties:
                email:
                  type: string
                  example: "test@example.com"
                certNo:
                  type: string
                  example: "445454"
      responses:
        200:
          $ref: '#/components/responses/OK'

  /register:
    post:
      tags:
        - 회원가입
      summary: 회원가입
      security: [ ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: "test@example.com"
                password:
                  type: string
                  example: "test1234!"
                confirmPassword:
                  type: string
                  example: "test1234!"
                agreedService:
                  type: boolean
      responses:
        200:
          $ref: '#/components/responses/OK'

  /register/businessFile:
    post:
      tags:
        - 회원가입
      summary: 사업자 등록증 저장
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                businessFile:
                  type: string
                  format: binary
      responses:
        200:
          $ref: '#/components/responses/OK'

  /register/profile:
    post:
      tags:
        - 회원가입
      summary: 사용자 지역 및 업종 저장
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - regionId
                - businessTypeId
              properties:
                regionId:
                  type: integer
                  example: 1
                businessTypeId:
                  type: integer
                  example: 1
      responses:
        200:
          $ref: '#/components/responses/OK'

  /password/mail:
    post:
      tags:
        - 로그인
      summary: 비밀번호 찾기 인증 메일 전송
      security: [ ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  example: "test@example.com"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  expiredAt:
                    type: number
                    example: 1732253873491

  /password/mail/check:
    post:
      tags:
        - 로그인
      summary: 인증번호 확인
      security: [ ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - certNo
              properties:
                email:
                  type: string
                  example: "test@example.com"
                certNo:
                  type: string
                  example: "445454"
      responses:
        200:
          $ref: '#/components/responses/OK'

  /password/reset:
    post:
      tags:
        - 로그인
      summary: 비밀번호 재설정
      security: [ ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - newPassword
                - confirmPassword
              properties:
                email:
                  type: string
                  example: "test@example.com"
                newPassword:
                  type: string
                  example: "test1234!"
                confirmPassword:
                  type: string
                  example: "test1234!"
      responses:
        200:
          $ref: '#/components/responses/OK'

  /login:
    post:
      tags:
        - 로그인
      summary: 로그인
      security: [ ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  example: "test@example.com"
                password:
                  type: string
                  example: "test1234!"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"
                  refreshToken:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"

  /login/kakao:
    post:
      tags:
        - 로그인
      summary: 카카오 로그인
      security: [ ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"
                  refreshToken:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"

  /login/mac:
    post:
      tags:
        - 로그인
      summary: 기기 로그인
      security: [ ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - address
              properties:
                password:
                  type: string
                  example: "10-3A-11-56-F2-D2"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"
                  refreshToken:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"
  /board:
    get:
      tags:
        - 게시판
      summary: 목록
      security: [ ]
      parameters:
        - name: boardType
          in: query
          description: 게시판 구분
          required: true
          schema:
            $ref: '#/components/schemas/BoardType'
        - name: page
          in: query
          description: 현재 페이지
          required: true
          schema:
            type: integer
        - name: size
          in: query
          description: 페이지 당 표시 갯수
          required: true
          schema:
            type: integer
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BoardList'
              examples:
                empty:
                  value:
                    totalCount: 0
                    contents: [ ]
                two:
                  value:
                    totalCount: 2
                    contents:
                      - boardId: 1
                        boardTypeName: "사업톡톡"
                        title: "지원을 알아봅시다"
                        content: "다양한 소상공인 지원에 대해서 알아보아요~"
                        createdAt: "2024-11-01 18:45:00"
                        author:
                          nickname: "소통장"
                          profileImageId: 21
                          filePath: "imageFileUrl.com"
                        likesCount: 540
                        like: true
                        commentsCount: 34
                        viewCount: 8463
                        bookmark: true
                      - boardId: 2
                        boardTypeName: "소상톡톡"
                        title: "사업하는거 너무 힘드네요"
                        content: "사업 다들 어떻게 하시나요?"
                        createdAt: "2024-11-07 10:42:00"
                        author:
                          nickname: "익명의소톡"
                          profileImageId: 354
                          filePath: "imageFileUrl.com"
                        likesCount: 11
                        like: true
                        commentsCount: 3
                        viewCount: 20
                        bookmark: true
                many:
                  value:
                    totalCount: 5
                    contents:
                      - boardId: 1
                        boardTypeName: "사업톡톡"
                        title: "지원을 알아봅시다"
                        content: "다양한 소상공인 지원에 대해서 알아보아요~"
                        createdAt: "2024-11-01 18:45:00"
                        author:
                          nickname: "소통장"
                          profileImageId: 21
                          filePath: "imageFileUrl.com"
                        likesCount: 540
                        like: true
                        commentsCount: 34
                        viewCount: 8463
                        bookmark: true
                      - boardId: 2
                        boardTypeName: "소상톡톡"
                        title: "사업하는거 너무 힘드네요"
                        content: "사업 다들 어떻게 하시나요?"
                        createdAt: "2024-11-07 10:42:00"
                        author:
                          nickname: "익명의소톡"
                          profileImageId: 354
                          filePath: "imageFileUrl.com"
                        likesCount: 11
                        like: true
                        commentsCount: 3
                        viewCount: 20
                        bookmark: true
                      - boardId: 3
                        boardTypeName: "소상톡톡"
                        title: "사업하는거 너무 힘드네요"
                        content: "사업 다들 어떻게 하시나요?"
                        createdAt: "2024-11-07 10:42:00"
                        author:
                          nickname: "익명의소톡"
                          profileImageId: 354
                          filePath: "imageFileUrl.com"
                        likesCount: 11
                        like: true
                        commentsCount: 3
                        viewCount: 20
                        bookmark: true
                      - boardId: 4
                        boardTypeName: "소상톡톡"
                        title: "사업하는거 너무 힘드네요"
                        content: "사업 다들 어떻게 하시나요?"
                        createdAt: "2024-11-07 10:42:00"
                        author:
                          nickname: "익명의소톡"
                          profileImageId: 354
                          filePath: "imageFileUrl.com"
                        likesCount: 11
                        like: true
                        commentsCount: 3
                        viewCount: 20
                        bookmark: true
                      - boardId: 5
                        boardTypeName: "사업톡톡"
                        title: "지원을 알아봅시다"
                        content: "다양한 소상공인 지원에 대해서 알아보아요~"
                        createdAt: "2024-11-01 18:45:00"
                        author:
                          nickname: "소통장"
                          profileImageId: 21
                          filePath: "imageFileUrl.com"
                        likesCount: 540
                        like: true
                        commentsCount: 34
                        viewCount: 8463
                        bookmark: true
    post:
      tags:
        - 게시판
      summary: 글쓰기
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                boardType:
                  $ref: '#/components/schemas/BoardType'
                title:
                  type: string
                  example: "익명의 소톡 모여라~"
                content:
                  type: string
                  example: "고민들을 댓글로 적어주세요~"
                attachments:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  boardId:
                    type: integer
                    example: 1

  /board/{boardId}:
    get:
      tags:
        - 게시판
      summary: 상세
      security: [ ]
      parameters:
        - name: boardId
          in: path
          description: 상세 아이디
          required: true
          schema:
            type: integer
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BoardDetail'
    put:
      tags:
        - 게시판
      summary: 게시글 수정
      parameters:
        - name: boardId
          in: path
          description: 상세 아이디
          required: true
          schema:
            type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                boardType:
                  $ref: '#/components/schemas/BoardType'
                title:
                  type: string
                  example: "익명의 소톡 모여라~"
                content:
                  type: string
                  example: "고민들을 댓글로 적어주세요~"
                attachments:
                  type: array
                  items:
                    type: string
                    format: binary
                deleteFileIds:
                  type: array
                  items:
                    type: integer
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  boardId:
                    type: integer
                    example: 1
    delete:
      tags:
        - 게시판
      summary: 게시글 삭제
      parameters:
        - name: boardId
          in: path
          description: 상세 아이디
          required: true
          schema:
            type: integer
      responses:
        200:
          $ref: '#/components/responses/OK'

  /board/{boardId}/claim:
    post:
      tags:
        - 게시판
      summary: 게시글 신고 등록
      parameters:
        - name: boardId
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          $ref: '#/components/responses/OK'

  /board/{boardId}/like:
    post:
      tags:
        - 게시판
      summary: 좋아요 등록
      parameters:
        - name: boardId
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          $ref: '#/components/responses/OK'
    delete:
      tags:
        - 게시판
      summary: 좋아요 취소
      parameters:
        - name: boardId
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          $ref: '#/components/responses/OK'

  /board/{boardId}/bookmark:
    post:
      tags:
        - 게시판
      summary: 북마크 등록
      parameters:
        - name: boardId
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          $ref: '#/components/responses/OK'
    delete:
      tags:
        - 게시판
      summary: 북마크 취소
      parameters:
        - name: boardId
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          $ref: '#/components/responses/OK'

  /comment:
    post:
      tags:
        - 게시판
      summary: 댓글 쓰기
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                boardId:
                  type: integer
                  example: 1
                content:
                  type: string
                  example: '댓글 이렇게 쓰는거 맞나용'
                attachments:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  commentId:
                    type: integer
                    example: 1

  /comment/{commentId}:
    put:
      tags:
        - 게시판
      summary: 댓글 수정
      parameters:
        - name: commentId
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                content:
                  type: string
                  example: '댓글 수정'
                attachments:
                  type: array
                  items:
                    type: string
                    format: binary
                deleteFileIds:
                  type: array
                  items:
                    type: integer
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  commentId:
                    type: integer
                    example: 5

  /comment/{commentId}/claim:
    post:
      tags:
        - 게시판
      summary: 댓글 신고 등록
      parameters:
        - name: commentId
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          $ref: '#/components/responses/OK'

  /comment/{commentId}/like:
    post:
      tags:
        - 게시판
      summary: 댓글 좋아요 등록
      parameters:
        - name: commentId
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          $ref: '#/components/responses/OK'
    delete:
      tags:
        - 게시판
      summary: 댓글 좋아요 취소
      parameters:
        - name: commentId
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          $ref: '#/components/responses/OK'

  /comment/{commentId}/comment:
    post:
      tags:
        - 게시판
      summary: 대댓글 쓰기
      parameters:
        - name: commentId
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                boardId:
                  type: integer
                  example: 1
                content:
                  type: string
                attachments:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  commentId:
                    type: integer
                    example: 2

  /board/best:
    get:
      tags:
        - 게시판
      summary: 인기글 목록
      security: [ ]
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BoardList'
              example:
                totalCount: 5
                contents:
                  - boardId: 1
                    boardTypeName: "사업톡톡"
                    title: "지원을 알아봅시다"
                    createdAt: "2024-11-01 18:45:00"
                    author:
                      nickname: "소통장"
                      profileImageId: 21
                      filePath: "imageFileUrl.com"
                  - boardId: 2
                    boardTypeName: "소상톡톡"
                    title: "사업하는거 너무 힘드네요"
                    createdAt: "2024-11-07 10:42:00"
                    author:
                      nickname: "익명의소톡"
                      profileImageId: 354
                      filePath: "imageFileUrl.com"
                  - boardId: 3
                    boardTypeName: "소상톡톡"
                    title: "사업하는거 너무 힘드네요"
                    createdAt: "2024-11-07 10:42:00"
                    author:
                      nickname: "익명의소톡"
                      profileImageId: 354
                      filePath: "imageFileUrl.com"
                  - boardId: 4
                    boardTypeName: "소상톡톡"
                    title: "사업하는거 너무 힘드네요"
                    createdAt: "2024-11-07 10:42:00"
                    author:
                      nickname: "익명의소톡"
                      profileImageId: 354
                      filePath: "imageFileUrl.com"
                  - boardId: 5
                    boardTypeName: "사업톡톡"
                    title: "지원을 알아봅시다"
                    createdAt: "2024-11-01 18:45:00"
                    author:
                      nickname: "소통장"
                      profileImageId: 21
                      filePath: "imageFileUrl.com"

  /event:
    get:
      tags:
        - 기타
      summary: 배너/이벤트 목록
      security: [ ]
      parameters:
        - name: screenType
          in: query
          description: 배너/이벤트 표시 화면 구분
          required: true
          schema:
            $ref: '#/components/schemas/ScreenType'
      responses:
        200:
          description: OK
          content:
            application/json:
              example:
                totalCount: 5
                contents:
                  - eventId: 10
                    eventType: GUIDE
                    link: https://naver.com
                    title: 제목10
                    content: 내용10
                    attachments:
                      - fileId: 100
                        fileName: "가이드1.pdf"
                        filePath: https://www.naver.com
                      - fileId: 101
                        fileName: "가이드2.jpg"
                        filePath: https://www.naver.com
                  - eventId: 9
                    eventType: ROLLING
                    link: https://naver.com
                    title: 제목9
                    content: 내용9
                    attachments:
                      - fileId: 99
                        fileName: "롤링베너.pdf"
                        filePath: https://www.naver.com
                  - eventId: 8
                    eventType: ROLLING
                    link: https://naver.com
                    title: 제목8
                    content: 내용8
                    attachments:
                      - fileId: 88
                        fileName: "롤링베너2.pdf"
                        filePath: https://www.naver.com
                  - eventId: 7
                    eventType: POPUP
                    link: https://naver.com
                    title: 팝업 제목
                    content: 팝업 내용
                    attachments:
                      - fileId: 77
                        fileName: "팝업 이미지.pdf"
                        filePath: https://www.naver.com
                  - eventId: 6
                    eventType: POPUP
                    link: https://naver.com
                    title: 팝업 공지 제목
                    content: 팝업 공지 내용
                    attachments:
                      - fileId: 66
                        fileName: 공지.pdf"
                        filePath: https://www.naver.com
                  - eventId: 5
                    eventType: GUIDE
                    link: https://naver.com
                    title: 제목5
                    content: 내용5
                    attachments:
                      - fileId: 55
                        fileName: "가이드1.pdf"
                        filePath: https://www.naver.com
                      - fileId: 44
                        fileName: "가이드2.jpg"
                        filePath: https://www.naver.com
  /chatRoom:
    get:
      tags:
        - 메시지
      summary: 채팅방 목록
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomList'
              examples:
                empty:
                  value:
                    totalCount: 0
                    chatRooms: [ ]
                one:
                  value:
                    totalCount: 1
                    chatRooms:
                      - chatRoomId: 1
                        chatRoomName: "익명의 소톡이"
                        sender:
                          userId: 1
                          nickname: "익명의 소톡이"
                          profileImageId: 3
                          filePath: "imageFileUrl.com"
                        lastChat: "이전 대화 내용이 들어갑니다."
                        createdAt: "2024-11-07 10:42:00"
                many:
                  value:
                    totalCount: 5
                    chatRooms:
                      - chatRoomId: 1
                        chatRoomName: "익명의 소톡이"
                        sender:
                          userId: 1
                          nickname: "익명의 소톡이"
                          profileImageId: 3
                          filePath: "imageFileUrl.com"
                        lastChat: "이전 대화 내용이 들어갑니다."
                        createdAt: "2024-11-07 10:42:00"
                      - chatRoomId: 2
                        chatRoomName: "익명의 소톡이"
                        sender:
                          userId: 2
                          nickname: "무너진 마음이"
                          profileImageId: 4
                          filePath: "imageFileUrl.com"
                        lastChat: "이전 대화 내용이 들어갑니다."
                        createdAt: "2024-11-05 10:42:00"
                      - chatRoomId: 3
                        chatRoomName: "익명의 소톡이"
                        sender:
                          userId: 3
                          nickname: "무너진 마음이"
                          profileImageId: 5
                          filePath: "imageFileUrl.com"
                        lastChat: "이전 대화 내용이 들어갑니다."
                        createdAt: "2024-11-05 10:42:00"
                      - chatRoomId: 4
                        chatRoomName: "익명의 소톡이"
                        sender:
                          userId: 4
                          nickname: "무너진 마음이"
                          profileImageId: 4
                          filePath: "imageFileUrl.com"
                        lastChat: "이전 대화 내용이 들어갑니다."
                        createdAt: "2024-11-05 10:42:00"
                      - chatRoomId: 5
                        chatRoomName: "익명의 소톡이"
                        sender:
                          userId: 5
                          nickname: "무너진 마음이"
                          profileImageId: 4
                          filePath: "imageFileUrl.com"
                        lastChat: "이전 대화 내용이 들어갑니다."
                        createdAt: "2024-11-05 10:42:00"
    post:
      tags:
        - 메시지
      summary: 채팅방 만들기
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                otherUserId:
                  type: integer
                  example: 1
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  chatRoomId:
                    type: integer
                    example: 1

  /chatRoom/{chatRoomId}:
    get:
      tags:
        - 메시지
      summary: 채팅방 상세
      parameters:
        - name: chatRoomId
          in: path
          description: 상세 아이디
          required: true
          schema:
            type: integer
        - name: page
          in: query
          description: 페이지
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          description: 페이지 별 콘텐츠 수
          schema:
            type: integer
            default: 10
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatRoomDetail'
              examples:
                empty:
                  value:
                    chatRoomName: "익명의 소톡이"
                    chats: [ ]
                    totalCount: 0
                two:
                  value:
                    chatRoomName: "익명의 소톡이"
                    chats:
                      - chatId: 1
                        content: "안녕하세요! 회의 자료 보내드립니다."
                        sender:
                          userId: 1
                          nickname: "익명의 소톡이"
                          profileImageId: 4
                          filePath: "imageFileUrl.com"
                        createdAt: "2024-11-07 15:44"
                        attachments: [ ]
                      - chatId: 2
                        content: ""
                        sender:
                          userId: 2
                          nickname: "익명의 사업톡"
                          profileImageId: 4
                          filePath: "imageFileUrl.com"
                        createdAt: "2024-11-07 16:44"
                        attachments:
                          - fileId: 34
                            fileName: "회의자료.pdf"
                            filePath: https://www.naver.com
                          - fileId: 45
                            fileName: "이미지.jpg"
                            filePath: https://www.naver.com
                    totalCount: 2
  /chat:
    post:
      tags:
        - 메시지
      summary: 메시지 작성
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - chatRoomId
              properties:
                chatRoomId:
                  type: integer
                  example: 123
                content:
                  type: string
                  example: "안녕하세요"
                attachments:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  chatId:
                    type: integer
                    example: 1

  /connect:
    get:
      description: |
        웹소켓 연결 요청
        - ws://{host}:{port}/connect
        
        보안 웹소켓 연결 요청
        - wss://{host}:{port}/connect
        
        채팅방 구독(상대방이 보낸 메시지를 받기위한 통로 추가)
        - /user/{userEmail}/chatRoom/{chatRoomId}
      tags:
        - 메시지
      summary: 채팅방 연결
      responses:
        101:
          description: Switching Protocols

  /myPage/profile:
    get:
      tags:
        - 마이페이지
      summary: 내 정보 상세
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

  /myPage/profile/image:
    patch:
      tags:
        - 마이페이지
      summary: 프로필 사진 변경
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                profileImage:
                  type: string
                  format: binary
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  fileId:
                    type: integer
                    example: 1
                  filePath:
                    type: string
                    example: "imageFileUrl.com"
    delete:
      tags:
        - 마이페이지
      summary: 프로필 사진 삭제
      responses:
        200:
          $ref: '#/components/responses/OK'


  /myPage/profile/nickname:

    patch:
      tags:
        - 마이페이지
      summary: 닉네임 설정
      requestBody:
        content:
          application/json:
            schema:
              type: object
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
              examples:
                empty:
                  value:
                    nickname: "익명의 소톡이"
                    nicknameGenerationRemaining: 4

  /myPage/profile/region:
    patch:
      tags:
        - 마이페이지
      summary: 활동지역 변경
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                regionId:
                  type: integer
                  example: 34
      responses:
        200:
          $ref: '#/components/responses/OK'

  /myPage/profile/businessType:
    patch:
      tags:
        - 마이페이지
      summary: 사업 분야 변경
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                businessTypeId:
                  type: integer
                  example: 34
      responses:
        200:
          $ref: '#/components/responses/OK'

  /myPage/password/mail:
    post:
      tags:
        - 마이페이지
      summary: 비밀번호 설정 인증 메일 전송
      responses:
        200:
          $ref: '#/components/responses/OK'

  /myPage/password/mail/check:
    post:
      tags:
        - 마이페이지
      summary: 인증번호 확인
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - certNo
              properties:
                certNo:
                  type: string
                  example: "445454"
      responses:
        200:
          $ref: '#/components/responses/OK'

  /myPage/password/reset:
    post:
      tags:
        - 마이페이지
      summary: 비밀번호 재설정
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - newPassword
                - confirmPassword
              properties:
                newPassword:
                  type: string
                  example: "test1234!"
                confirmPassword:
                  type: string
                  example: "test1234!"
      responses:
        200:
          $ref: '#/components/responses/OK'

  /myPage/bookmark:
    get:
      tags:
        - 마이페이지
      summary: 북마크 목록
      parameters:
        - name: page
          in: query
          description: 현재 페이지
          required: true
          schema:
            type: integer
        - name: size
          in: query
          description: 페이지 당 표시 갯수
          required: true
          schema:
            type: integer
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BoardList'
              examples:
                empty:
                  value:
                    totalCount: 0
                    contents: [ ]
                two:
                  value:
                    totalCount: 2
                    contents:
                      - boardId: 1
                        boardTypeName: "사업톡톡"
                        title: "지원을 알아봅시다"
                        content: "다양한 소상공인 지원에 대해서 알아보아요~"
                        createdAt: "2024-11-01 18:45:00"
                        author:
                          nickname: "소통장"
                          profileImageId: 21
                          filePath: "imageFileUrl.com"
                        likesCount: 540
                        like: true
                        commentsCount: 34
                        viewCount: 8463
                        bookmark: true
                      - boardId: 2
                        boardTypeName: "소상톡톡"
                        title: "사업하는거 너무 힘드네요"
                        content: "사업 다들 어떻게 하시나요?"
                        createdAt: "2024-11-07 10:42:00"
                        author:
                          nickname: "익명의소톡"
                          profileImageId: 354
                          filePath: "imageFileUrl.com"
                        likesCount: 11
                        like: true
                        commentsCount: 3
                        viewCount: 20
                        bookmark: true
                many:
                  value:
                    totalCount: 5
                    contents:
                      - boardId: 1
                        boardTypeName: "사업톡톡"
                        title: "지원을 알아봅시다"
                        content: "다양한 소상공인 지원에 대해서 알아보아요~"
                        createdAt: "2024-11-01 18:45:00"
                        author:
                          nickname: "소통장"
                          profileImageId: 21
                          filePath: "imageFileUrl.com"
                        likesCount: 540
                        like: true
                        commentsCount: 34
                        viewCount: 8463
                        bookmark: true
                      - boardId: 2
                        boardTypeName: "소상톡톡"
                        title: "사업하는거 너무 힘드네요"
                        content: "사업 다들 어떻게 하시나요?"
                        createdAt: "2024-11-07 10:42:00"
                        author:
                          nickname: "익명의소톡"
                          profileImageId: 354
                          filePath: "imageFileUrl.com"
                        likesCount: 11
                        like: true
                        commentsCount: 3
                        viewCount: 20
                        bookmark: true
                      - boardId: 3
                        boardTypeName: "소상톡톡"
                        title: "사업하는거 너무 힘드네요"
                        content: "사업 다들 어떻게 하시나요?"
                        createdAt: "2024-11-07 10:42:00"
                        author:
                          nickname: "익명의소톡"
                          profileImageId: 354
                          filePath: "imageFileUrl.com"
                        likesCount: 11
                        like: true
                        commentsCount: 3
                        viewCount: 20
                        bookmark: true
                      - boardId: 4
                        boardTypeName: "소상톡톡"
                        title: "사업하는거 너무 힘드네요"
                        content: "사업 다들 어떻게 하시나요?"
                        createdAt: "2024-11-07 10:42:00"
                        author:
                          nickname: "익명의소톡"
                          profileImageId: 354
                          filePath: "imageFileUrl.com"
                        likesCount: 11
                        like: true
                        commentsCount: 3
                        viewCount: 20
                        bookmark: true
                      - boardId: 5
                        boardTypeName: "사업톡톡"
                        title: "지원을 알아봅시다"
                        content: "다양한 소상공인 지원에 대해서 알아보아요~"
                        createdAt: "2024-11-01 18:45:00"
                        author:
                          nickname: "소통장"
                          profileImageId: 21
                          filePath: "imageFileUrl.com"
                        likesCount: 540
                        like: true
                        commentsCount: 34
                        viewCount: 8463
                        bookmark: true

  /myPage/board:
    get:
      tags:
        - 마이페이지
      summary: 작성글 목록
      parameters:
        - name: page
          in: query
          description: 현재 페이지
          required: true
          schema:
            type: integer
        - name: size
          in: query
          description: 페이지 당 표시 갯수
          required: true
          schema:
            type: integer
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  totalCount:
                    type: integer
                    example: 1
                  boards:
                    type: array
                    items:
                      type: object
                      properties:
                        boardId:
                          type: integer
                          example: 1
                        type:
                          type: string
                          enum:
                            - board
                            - comment
                        boardTypeName:
                          type: string
                          example: "소상톡톡"
                        title:
                          type: string
                          example: "근처 같이 요리공부할 사람"
                        content:
                          type: string
                          example: "시간되면 나도 같이 참여하고 싶은데..."
                        createdAt:
                          type: string
                          example: "2024-11-07 16:30"
              examples:
                empty:
                  value:
                    totalCount: 0
                    boards: [ ]
                two:
                  value:
                    totalCount: 2
                    boards:
                      - boardId: 2
                        contentType: "board"
                        boardTypeName: "소상톡톡"
                        title: "근처 같이 요리공부할 사람"
                        content: ""
                        nickname: "익명의 소톡이"
                        createdAt: "2024-11-08 16:30"
                      - boardId: 1
                        contentType: "comment"
                        boardTypeName: "사업톡톡"
                        title: "근처 같이 요리공부할 사람"
                        content: "간되면 나도 같이 참여하고 싶은데..."
                        nickname: "익명의 소톡이"
                        createdAt: "2024-11-07 16:30"
                many:
                  value:
                    totalCount: 5
                    boards:
                      - boardId: 5
                        contentType: "board"
                        boardTypeName: "소상톡톡"
                        title: "근처 같이 요리공부할 사람"
                        content: ""
                        nickname: "익명의 소톡이"
                        createdAt: "2024-11-08 16:30"
                      - boardId: 4
                        contentType: "board"
                        boardTypeName: "소상톡톡"
                        title: "근처 같이 요리공부할 사람"
                        content: ""
                        nickname: "익명의 소톡이"
                        createdAt: "2024-11-08 16:30"
                      - boardId: 3
                        contentType: "comment"
                        boardTypeName: "사업톡톡"
                        title: "근처 같이 요리공부할 사람"
                        content: "간되면 나도 같이 참여하고 싶은데..."
                        nickname: "익명의 소톡이"
                        createdAt: "2024-11-07 16:30"
                      - boardId: 2
                        contentType: "board"
                        boardTypeName: "소상톡톡"
                        title: "근처 같이 요리공부할 사람"
                        content: ""
                        nickname: "익명의 소톡이"
                        createdAt: "2024-11-08 16:30"
                      - boardId: 1
                        contentType: "comment"
                        boardTypeName: "사업톡톡"
                        title: "근처 같이 요리공부할 사람"
                        content: "간되면 나도 같이 참여하고 싶은데..."
                        nickname: "익명의 소톡이"
                        createdAt: "2024-11-07 16:30"
  /logout:
    post:
      tags:
        - 마이페이지
      summary: 로그아웃
      responses:
        200:
          $ref: '#/components/responses/OK'

  /token/refresh:
    post:
      tags:
        - 기타
      summary: 액세스 토큰 재발급
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                refreshToken:
                  type: string
                  example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tokens'

  /user/info:
    get:
      tags:
        - 기타
      summary: 사용자 정보 조회
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

  /combo/region:
    get:
      tags:
        - 콤보
      summary: 지역 목록 콤보
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  regions:
                    type: array
                    items:
                      type: object
                      properties:
                        regionId:
                          type: integer
                          example: 1
                        regionName:
                          type: string
                          example: "서울"
                example:
                  regions:
                    - regionId: 1
                      regionName: "서울"
                    - regionId: 2
                      regionName: "경기"
                    - regionId: 3
                      regionName: "인천"
                    - regionId: 4
                      regionName: "강원"
                    - regionId: 5
                      regionName: "충북"

  /combo/businessType:
    get:
      tags:
        - 콤보
      summary: 사업 종류 목록 콤보
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  businessTypes:
                    type: array
                    items:
                      type: object
                      properties:
                        businessTypeId:
                          type: integer
                          example: 1
                        businessTypeName:
                          type: string
                          example: "제조업"
                example:
                  businessTypes:
                    - businessTypeId: 1
                      businessTypeName: "제조업"
                    - businessTypeId: 2
                      businessTypeName: "서비스업"

  /combo/category:
    get:
      tags:
        - 콤보
      summary: 카테고리 목록 콤보
      parameters:
        - name: categoryType
          in: query
          description: 카테고리 분류 타입
          schema:
            $ref: '#/components/schemas/CategoryType'
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  categories:
                    type: array
                    items:
                      type: object
                      properties:
                        categoryId:
                          type: integer
                        categoryType:
                          type: string
                        categoryTypeName:
                          type: string
                        category:
                          type: string
                        filePath:
                          type: string
              examples:
                region:
                  value:
                    categories:
                      - categoryId: 1
                        categoryType: "REGION"
                        categoryTypeName: "지역"
                        category: "서울"
                        filePath: "https://i.namu.wiki/i/nFkC0xs-jJa6FJSILN4VekIj1JPCRc2_mHs6YfO6-hQB08I5tYNjkgWJMC0xh4TVwfBzOPd8S1JEw3AAiKjlVlyzez9vzGmphSWlsE9dvPzOU2v_RHZ5UE7v0ocSwNLWP3HUUXQ-mHyb0igZtsOoqA.webp"
                      - categoryId: 2
                        categoryType: "REGION"
                        categoryTypeName: "지역"
                        category: "경기"
                        filePath: "https://i.namu.wiki/i/nFkC0xs-jJa6FJSILN4VekIj1JPCRc2_mHs6YfO6-hQB08I5tYNjkgWJMC0xh4TVwfBzOPd8S1JEw3AAiKjlVlyzez9vzGmphSWlsE9dvPzOU2v_RHZ5UE7v0ocSwNLWP3HUUXQ-mHyb0igZtsOoqA.webp"
                      - categoryId: 3
                        categoryType: "REGION"
                        categoryTypeName: "지역"
                        category: "인천"
                        filePath: "https://i.namu.wiki/i/nFkC0xs-jJa6FJSILN4VekIj1JPCRc2_mHs6YfO6-hQB08I5tYNjkgWJMC0xh4TVwfBzOPd8S1JEw3AAiKjlVlyzez9vzGmphSWlsE9dvPzOU2v_RHZ5UE7v0ocSwNLWP3HUUXQ-mHyb0igZtsOoqA.webp"
                topic:
                  value:
                    categories:
                      - categoryId: 1
                        categoryType: "TOPIC"
                        categoryTypeName: "토픽"
                        category: "상권분석"
                        filePath: "https://enterprise.kt.com/entpf/images/product/webResource/P_PD_AI_BD_002_s1-img.png"
                      - categoryId: 2
                        categoryType: "TOPIC"
                        categoryTypeName: "토픽"
                        category: "커리어"
                        filePath: "https://enterprise.kt.com/entpf/images/product/webResource/P_PD_AI_BD_002_s1-img.png"
                      - categoryId: 3
                        categoryType: "TOPIC"
                        categoryTypeName: "토픽"
                        category: "매장분석"
                        filePath: "https://enterprise.kt.com/entpf/images/product/webResource/P_PD_AI_BD_002_s1-img.png"

components:
  schemas:
    BoardDetail:
      type: object
      properties:
        boardType:
          type: string
          example: "SOSANG"
        boardTypeName:
          type: string
          example: "소상톡톡"
        boardId:
          type: integer
          example: 1
        author:
          type: object
          properties:
            nickname:
              type: string
              example: "익명의소톡"
            profileImageId:
              type: integer
              example: 12
            filePath:
              type: string
              example: "imageFileUrl.com"
            userId:
              type: integer
              example: 1
        createdAt:
          type: string
          example: "2024-11-05 17:39:00"
        title:
          type: string
          example: "K-Start up 에서 진행하는 지원 포탈"
        content:
          type: string
          example: "우리 구에서는 저렴한 가격과 양질의..."
        attachments:
          type: array
          items:
            type: object
            properties:
              fileName:
                type: string
                example: "착한가격업소_지원사업_소개.doc"
              fileId:
                type: integer
                example: 344
              filePath:
                type: string
                example: "https://www.naver.com"
        likesCount:
          type: integer
          example: 11
        like:
          type: boolean
        commentsCount:
          type: integer
          example: 2
        viewCount:
          type: integer
          example: 11
        bookmark:
          type: boolean
        deleted:
          type: boolean
        claim:
          type: boolean
        comments:
          $ref: '#/components/schemas/Comments'
    Comments:
      type: array
      items:
        type: object
        properties:
          commentId:
            type: integer
            example: 1
          nickname:
            type: string
            example: "익명의 소톡"
          userId:
            type: integer
            example: 1
          createdAt:
            type: string
            example: "2024-11-05 17:39:00"
          content:
            type: string
            example: "먼데 나도 알려줘"
          attachments:
            type: array
            items:
              type: object
              properties:
                fileName:
                  type: string
                  example: "착한가격업소_지원사업_소개.doc"
                fileId:
                  type: integer
                  example: 1
                filePath:
                  type: string
                  example: "https://www.naver.com"
          likesCount:
            type: integer
            example: 1
          like:
            type: boolean
          deleted:
            type: boolean
          claim:
            type: boolean
          comments:
            type: array
            items:
              type: object
              properties:
                commentId:
                  type: integer
                  example: 1
                nickname:
                  type: string
                  example: "익명의 소톡"
                createdAt:
                  type: string
                  example: "2024-11-05 17:39:00"
                content:
                  type: string
                  example: "먼데 나도 알려줘"
                attachments:
                  type: array
                  items:
                    type: object
                    properties:
                      fileName:
                        type: string
                        example: "착한가격업소_지원사업_소개.doc"
                      fileId:
                        type: integer
                        example: 1
                      filePath:
                        type: string
                        example: "https://www.naver.com"
                likesCount:
                  type: integer
                  example: 1
                like:
                  type: boolean
                deleted:
                  type: boolean
                claim:
                  type: boolean
    BoardList:
      type: object
      properties:
        totalCount:
          type: integer
          example: 1
        contents:
          type: array
          items:
            type: object
            properties:
              boardId:
                type: integer
                example: 1
              boardTypeName:
                type: string
                example: "사업톡톡"
              boardType:
                type: string
                example: "SAUP"
              title:
                type: string
                example: "사업하는거 너무 힘드네요"
              content:
                type: string
                example: "사업 다들 어떻게 하시나요?"
              createdAt:
                type: string
                example: "2024-11-07 10:42:00"
              author:
                type: object
                properties:
                  nickname:
                    type: string
                    example: "익명의소톡"
                  profileImageId:
                    type: integer
                    example: 354
                  filePath:
                    type: string
                    example: "imageFileUrl.com"
              likesCount:
                type: integer
                example: 11
              commentsCount:
                type: integer
                example: 3
              viewCount:
                type: integer
                example: 20
              bookmark:
                type: boolean
    BoardType:
      type: string
      enum:
        - SOSANG
        - SAUP
    CategoryType:
      type: string
      enum:
        - REGION
        - TOPIC
    ScreenType:
      type: string
      enum:
        - BOARD
        - MESSAGE
        - MY_PAGE
        - REGISTRATION
    ChatRoomList:
      type: array
      items:
        type: object
        properties:
          chatRoomId:
            type: integer
            example: 1
          sender:
            type: object
            properties:
              userId:
                type: integer
                example: 1
              nickname:
                type: string
                example: "익명의 소톡이"
              profileImageId:
                type: integer
                example: 3
              filePath:
                type: string
                example: "imageFileUrl.com"
          profileImageId:
            type: integer
            example: 123
          lastChat:
            type: string
            example: "이전 대화 내용이 들어갑니다."
          createdAt:
            type: string
            example: "2024-11-07 10:42:00"
    ChatRoomDetail:
      type: object
      properties:
        chats:
          type: array
          items:
            type: object
            properties:
              chatId:
                type: integer
                example: 2
              content:
                type: string
                example: "안녕하세요! 회의 자료 보내드립니다."
              sender:
                type: object
                properties:
                  userId:
                    type: integer
                    example: 3
                  nickname:
                    type: string
                    example: "익명의 소톡이"
                  profileImageId:
                    type: integer
                    example: 3
              createdAt:
                type: string
                example: "2024-11-07 15:44"
              attachments:
                type: array
                items:
                  type: object
                  properties:
                    fileId:
                      type: integer
                      example: 34
                    fileName:
                      type: string
                      example: "회의자료.pdf"
                    filePath:
                      type: string
                      example: "https://www.naver.com"
        totalCount:
          type: integer
          example: 100
        chatRoomName:
          type: string
          example: "가난한 토깽이"
    User:
      type: object
      properties:
        nickname:
          type: string
          example: 가난한 토깽이
        nicknameGenerationRemaining:
          type: integer
          example: 5
        profileImageId:
          type: integer
          example: 123
        filePath:
          type: string
          example: https://profile.url.com
        email:
          type: string
          example: test@example.com
        regionName:
          type: string
          example: 서울
        regionId:
          type: integer
          example: 1
        businessTypeName:
          type: string
          example: 제조업
        businessTypeId:
          type: integer
          example: 34
    Tokens:
      type: object
      properties:
        accessToken:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"
        refreshToken:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"
    Error:
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: integer
            message:
              type: string
          required:
            - code
            - message
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
  responses:
    OK:
      description: Successful operation
      content:
        application/json:
          schema:
            type: object
    Unauthorized:
      description: 액세스 토큰이 비어 있거나 유효하지 않은 경우
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          example:
            value:
              code: 401
              message: unauthorized
    Forbidden:
      description: 권한이 없는 경우
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          example:
            value:
              code: 403
              message: forbidden